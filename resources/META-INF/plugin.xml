<idea-plugin version="4">
    <id>de.monticore.lang.montisecarc.MontiSecArcLanguagePlugin</id>
    <name>MontiSecArc Language Plugin</name>
    <version>0.8.0</version>
    <vendor email="thomas.buning@rwth-aachen.de"/>

    <description><![CDATA[
      MontiSecArc IntelliJ Language Plugin
    ]]></description>

    <change-notes><![CDATA[
    ]]>
    </change-notes>

    <depends optional="true">de.tbuning.neo4j.graphdatabase</depends>
    <depends optional="true">com.neueda4j.intellij.plugin.cypher</depends>

    <project-components>
        <component>
            <implementation-class>de.monticore.lang.montisecarc.visualization.GraphDatabase</implementation-class>
        </component>
        <component>
            <implementation-class>de.monticore.lang.montisecarc.policy.PolicyLoader</implementation-class>
        </component>
    </project-components>

    <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/build_number_ranges.html for description -->
    <idea-version since-build="141.0"/>

    <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
         on how to target different products -->
    <extensions defaultExtensionNs="com.intellij">

        <internalFileTemplate name="MSA Component"/>
        <internalFileTemplate name="MSA File"/>
        <defaultTemplatePropertiesProvider
                implementation="de.monticore.lang.montisecarc.actions.MSATemplatePropertiesProvider"/>
        <createFromTemplateHandler implementation="de.monticore.lang.montisecarc.actions.MSACreateFromTemplateHandler"/>

        <stubElementTypeHolder class="de.monticore.lang.montisecarc.psi.MSACompositeElementTypes"/>

        <!-- Add your extensions here -->
        <fileTypeFactory implementation="de.monticore.lang.montisecarc.MSAFileTypeFactory"/>
        <lang.parserDefinition language="MSA" implementationClass="de.monticore.lang.montisecarc.MSAParserDefinition"/>
        <lang.syntaxHighlighterFactory language="MSA"
                                       implementationClass="de.monticore.lang.montisecarc.highlighting.MSASyntaxHighlighterFactory"/>
        <lang.formatter language="MSA"
                        implementationClass="de.monticore.lang.montisecarc.formatting.MSAFormattingModelBuilder"/>
        <lang.commenter language="MSA" implementationClass="de.monticore.lang.montisecarc.commenter.MSACommenter"/>
        <colorSettingsPage implementation="de.monticore.lang.montisecarc.highlighting.MSAColorSettingsPage"/>
        <codeStyleSettingsProvider
                implementation="de.monticore.lang.montisecarc.formatting.settings.MSACodeStyleSettingsProvider"/>
        <lang.braceMatcher language="MSA" implementationClass="de.monticore.lang.montisecarc.MSABraceMatcher"/>
        <lang.foldingBuilder language="MSA"
                             implementationClass="de.monticore.lang.montisecarc.folding.MSAFoldingBuilder"/>

        <!-- Annotator -->
        <annotator language="MSA"
                   implementationClass="de.monticore.lang.montisecarc.annotation.MSAInvalidSemanticAnnotator"/>
        <annotator language="MSA"
                   implementationClass="de.monticore.lang.montisecarc.annotation.MSAInvalidPackageAnnotator"/>
        <annotator language="MSA"
                   implementationClass="de.monticore.lang.montisecarc.annotation.MSAProtocolAnnotator"/>
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.MSAPortTypeAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.ThirdPartyComponentAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.MSAComponentInstanceAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.MSAComponentTypAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.MSAPortInstanceAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.SourceTargetAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.SingleStatementsAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.MainComponentAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.AccessRolesAnnotator" />
        <annotator language="MSA" implementationClass="de.monticore.lang.montisecarc.annotation.TrustLevelAnnotator" />

        <completion.contributor language="MSA"
                                implementationClass="de.monticore.lang.montisecarc.completion.MSAKeywordCompletionContributor"/>
        <psi.referenceContributor language="MSA"
                                  implementation="de.monticore.lang.montisecarc.references.MSAReferenceContributor"/>
        <langCodeStyleSettingsProvider
                implementation="de.monticore.lang.montisecarc.formatting.settings.MSALanguageCodeStyleSettingsProvider"/>
        <lang.findUsagesProvider language="MSA"
                                 implementationClass="de.monticore.lang.montisecarc.usage.MSAFindUsageProvider"/>
        <lang.quoteHandler language="MSA" implementationClass="de.monticore.lang.montisecarc.MSAQuoteHandler"/>

        <!-- Live Templates -->
        <defaultLiveTemplatesProvider
                implementation="de.monticore.lang.montisecarc.templates.MSALiveTemplatesProvider"/>
        <liveTemplateContext implementation="de.monticore.lang.montisecarc.templates.MSAContextType$Component"/>
        <liveTemplateContext implementation="de.monticore.lang.montisecarc.templates.MSAContextType$Port"/>

        <!-- Indices -->
        <stubIndex implementation="de.monticore.lang.montisecarc.stubs.index.MSANamedElementIndex"/>
        <stubIndex implementation="de.monticore.lang.montisecarc.stubs.index.MSAPortIndex"/>
        <stubIndex implementation="de.monticore.lang.montisecarc.stubs.index.MSAComponentDeclarationIndex"/>
        <stubIndex implementation="de.monticore.lang.montisecarc.stubs.index.MSAComponentInstanceIndex"/>
        <stubIndex implementation="de.monticore.lang.montisecarc.stubs.index.MSAComponentInstanceDeclarationIndex"/>

        <!-- Inspection -->
        <localInspection level="WARNING" enabledByDefault="true"
                         implementationClass="de.monticore.lang.montisecarc.inspections.MSAPortTypMissingImplementationInspection"
                         displayName="Unresolved Port Type Reference" language="MSA" groupName="MSA"/>
        <lang.inspectionSuppressor language="MSA"
                                   implementationClass="de.monticore.lang.montisecarc.analyzer.inspections.MSAInspectionSuppressor"/>
        <localInspection implementationClass="de.monticore.lang.montisecarc.inspections.GraphQueryInspection"
                         displayName="Policy Check" groupName="MSA"/>
    </extensions>

    <extensions defaultExtensionNs="de.tbuning.neo4j.graphdatabase">
        <Neo4JGraphDatabase databaseFolder="graph_editor" withServer="true" />
        <Neo4JGraphDatabase databaseFolder="analyzer" withServer="false" />
    </extensions>

    <actions>
        <action id="MSA.NewMSAFile" class="de.monticore.lang.montisecarc.actions.NewMSAFileAction"
                text="MSA file" description="Create new MSA file">
            <add-to-group group-id="NewGroup" relative-to-action="NewFile" anchor="after"/>
        </action>
        <group id="MSAGenerators" text="Generators" description="Generator Extensions for MSA Language" popup="true">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <action id="de.monticore.lang.montisecarc.GraphQueryEditor.MSAGenerateGraph" class="de.monticore.lang.montisecarc.actions.MSAGenerateGraph"
                    text="Generate Graph" description="Generate Graph from MSA File">
                <add-to-group group-id="MSAGenerators" />
                <keyboard-shortcut first-keystroke="alt shift G" keymap="$default" />
            </action>
        </group>
    </actions>
</idea-plugin>